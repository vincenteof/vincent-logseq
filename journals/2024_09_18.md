- [[evm]] as a virtual machine #[[Crypto Roadmap]]
	- https://www.decipherclub.com/the-abcs-of-ethereum-virtual-machine
	- 它是一个 vm，可以独立于不同平台运行
	- 它也是一个 state machine, 每一笔交易都会改变它的 world state
	- 他可以被视作是 turing complete 的，但是与其他的运算机制不同，因为它是分布式的全球计算机，一旦有人执行了类似死循环的操作，将导致整个系统停止。因此它引入了 gas 机制，每一次计算或者存储都需要消耗 gas，一旦有类似死循环出现，将会消耗大量 gas 导致账户余额不足，最终停止计算
	- EVM 的架构：storage，memory，calldata，stack，program counter
	- EVM 中的 transaction：
		- 由 EOA 账户触发的任何可以改变 world state 的操作，分为两类
			- 调用：比如向其他 EOA 账户转账以及调用合约方法
			- 合约创建：部署一个新的合约
		- 它的结构：
			- nonce：每次从 EOA 账户里创建交易的计数
			- recipient or to：某个地址，可以是转账的 EOA 地址也可以是合约的地址
			- value：划转的 ether 数量
			- data：
			- gas limit: 这比交易所能用的 gas 数量
			- maxPriorityFeePerGas or maxFeePerGas
			- signature
	- 每当一笔交易发出的时候会有如下流程：
		- 初始化 evm，更新 pc，加载 storage，环境变量设置以及 memory 初始化。这些步骤完成后 evm 就可以执行 opcode 并修改 world state
		- 在发起交易的时候用户会提供 gas，当合约方法不断被执行，提供的 gas 会被逐步消耗，如果还没执行结束 gas 就被耗尽，那么 evm 会抛出 out of gas 的异常，这时之前发生的任何状态变更都会被回滚。
		-
-