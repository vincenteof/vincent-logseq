- [[reentracy]] 攻击 #[[Crypto Roadmap]]
	- 常见于发送原生 ether 的时候，因为漏洞合约可能会触发到恶意合约的 fallback 函数
	- 抽象一下模式，漏洞合约 C1 与恶意合约 C2：
		- C2 实现了某个 interface，比如 IERC20
		- C1 会去和很多不同的实现这个 interface 的合约做交互，常见的场景是 DEX，会有很多 IERC20 的合约注册进来
		- 当 C1 调用了 C2 实现的接口方法，因为是完全自定义的，C2 可以在实现里再去调用 C1 的方法
		- 一旦 C1 没有针对重入做处理就会被攻击
	- `ReentrancyGuard` 的实现
		- uint256 原因
			- boolean 比 uint256 更昂贵（多一次 sload），因为 EVM 的内部机制
			- gas refund 机制
				- https://eips.ethereum.org/EIPS/eip-2200
		- nonReentrant 的方法互相调用
			- 将方法的实际实现抽取为 private，他们可以互相调用，对外暴露的为  external nonReentrant
		- ReentrancyGuardTransient
		  id:: 66abad30-1cc9-45e7-ac0a-07d7d12f6cfa
			- 对于支持 EIP-1153 的环境，使用这个版本 gas 消耗更小
				- 它与 gas refund 的区别是啥？
	- 其他防止的方法：
		- 代码遵守 checks-effects-interactions
			- 讲每行代码都分为检查，状态变更，于其他合约的交互
			- 按照上面的顺序排列
		-
		-
		-
		-